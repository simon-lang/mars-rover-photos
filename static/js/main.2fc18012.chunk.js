(this["webpackJsonpmars-rover-photos"]=this["webpackJsonpmars-rover-photos"]||[]).push([[0],{130:function(e,t,s){},131:function(e,t,s){"use strict";s.r(t);var a=s(73),n=s(26),i=(s(79),s(33)),r=s(34),c=s(5),o=function(){function e(){Object(i.a)(this,e),this.data={},Object(c.l)(this)}return Object(r.a)(e,[{key:"set",value:function(e){this.data=e}}]),e}(),l=function(){function e(){Object(i.a)(this,e),this.rover="perseverance",this.camera="",this.sol=1,Object(c.l)(this)}return Object(r.a)(e,[{key:"setRover",value:function(e){this.rover=e,this.sol=1,console.log("setRover",e)}},{key:"setCamera",value:function(e){this.camera=e,console.log("setCamera",e)}},{key:"setSol",value:function(e){this.sol=e,console.log("setSol",e)}}]),e}(),d=s(43),j=s.n(d),h=s(49),v=s.n(h),u=(s(90),s(163)),m=s(164),b=s(21),f=s(2),O=Object(b.a)((function(e){var t=e.filters;return Object(f.jsxs)("div",{className:"Filters",children:[Object(f.jsx)("div",{className:"Filters__item",children:Object(f.jsxs)(u.a,{label:"Rover",value:t.rover,onChange:function(e){return t.setRover(e.target.value)},children:[Object(f.jsx)(m.a,{value:"perseverance",children:"Perseverance"}),Object(f.jsx)(m.a,{value:"curiosity",children:"Curiosity"}),Object(f.jsx)(m.a,{value:"opportunity",children:"Opportunity"}),Object(f.jsx)(m.a,{value:"spirit",children:"Spirit"})]})}),!1]})})),p=s(0),x=s(29),g=s.n(x),_=s(51),N=s(52),P=s.n(N),w=s(70),y=s.n(w),k=s(72),C="https://api.nasa.gov/mars-photos/api/v1/",L="wwYXJBLASfX4wNrbLfEetDdx6U3EbRSm1Lx93DGa",S=function(){var e=Object(_.a)(g.a.mark((function e(t,s){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,s);case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}(),M=function(e){var t=e.rover.toLowerCase(),s=C+"rovers/"+t+"/photos?";return e.camera&&(s+="camera="+e.camera),null!=e.sol?s+="&sol="+e.sol:s+="&earth_date="+y()(e.earth_date).format("YYYY-M-D"),s+="&api_key=".concat(L)},R=s(18),E=Object(b.a)((function(e){var t,s,a=e.manifest,n=e.filters;Object(p.useEffect)((function(){var e;(e=n.rover,P()({method:"GET",url:C+"manifests/"+e.toLowerCase()+"?api_key="+L}).then((function(e){return e.data.photo_manifest}))).then((function(e){a.set(e)}))}),[n.rover,a]);var i=a.data,r=i.name,c=i.landing_date,o=i.launch_date,l=i.status,d=i.max_sol,j=i.max_date,h=i.total_photos,v=i.photos,u={name:r,landing_date:c,launch_date:o,status:l,max_sol:d,max_date:j,total_photos:h},m=Object(p.useRef)(null);if(m.current&&v){var b={$schema:"https://vega.github.io/schema/vega-lite/v4.json",data:{values:v.map((function(e){return{sol:e.sol,date:e.earth_date,value:e.total_photos}}))},config:{background:null},vconcat:[{width:800,height:400,transform:[{filter:{param:"brush"}}],mark:{type:"bar",color:"rgb(153, 45, 50)"},encoding:{x:{field:"sol",type:"nominal",axis:!1},y:{field:"value",type:"quantitative",axis:{title:"Photos"}},tooltip:[{field:"sol",title:"Martian Sol"},{field:"value",title:"Photos"},{field:"date",title:"Earth Date"}]}},{width:800,height:100,mark:{type:"bar",color:"rgb(153, 45, 50)"},params:[{name:"brush",select:{type:"interval",encodings:["x"]}}],encoding:{x:{field:"sol",type:"nominal",axis:!1},y:{field:"value",type:"quantitative",axis:{title:"Photos"}}}}]};console.log(b),window.vegaEmbed(m.current,b,{actions:!1,theme:"dark"}).then((function(e){var t=e.view;e.spec;t.addEventListener("click",(function(e,t){if(t&&t.datum){var s=t.datum.sol;s&&(n.setSol(s),Object(R.navigate)("/photos"))}}))}))}return u?Object(f.jsxs)("div",{className:"Manifest",children:[Object(f.jsx)("div",{ref:m}),Object(f.jsxs)("div",{style:{paddingLeft:"1em"},children:[Object(f.jsx)(O,{filters:n}),Object(f.jsxs)("pre",{children:["Rover Selected: ",u.name]}),Object(f.jsx)("pre",{children:"Manifest... Loading"}),Object(f.jsxs)("pre",{children:["Mission Status... ",u.status]}),Object(f.jsxs)("pre",{children:["Most Recent Photo... ",u.max_date]}),Object(f.jsxs)("pre",{children:["Days... ",null===(t=u.max_sol)||void 0===t?void 0:t.toLocaleString()]}),Object(f.jsxs)("pre",{children:["Total Photos... ",null===(s=u.total_photos)||void 0===s?void 0:s.toLocaleString()]}),Object(f.jsx)("pre",{children:"> Select date to view photos"})]})]}):Object(f.jsx)("div",{children:"Loading..."})})),D=s(161),F=function(e){var t,s=e.photo,a=e.onClickPhoto,i=Object(p.useState)("black"),r=Object(n.a)(i,2),c=r[0],o=r[1],l=Object(p.useState)(!1),d=Object(n.a)(l,2),j=d[0],h=d[1],v=s.img_src,u=new window.Image;return u.onload=function(){o("url(".concat(v,")")),setTimeout((function(){h(!0)}),10)},u.src=v,Object(f.jsx)("div",{className:"Photo ".concat(j?"Photo--reveal":""),style:{backgroundImage:c},onClick:function(){return a(s)},children:Object(f.jsxs)("div",{className:"Photo__details",children:[Object(f.jsxs)("div",{children:[" ",s.rover.name," "]}),Object(f.jsxs)("div",{children:[" ",s.rover.missionDates||""," "]}),Object(f.jsxs)("div",{children:[" ",null===(t=s.camera)||void 0===t?void 0:t.name," "]}),Object(f.jsxs)("div",{children:[" ",s.earth_date," "]})]})})},A=Object(b.a)((function(e){var t=e.filters,s=e.onClickPhoto,a=Object(p.useState)(1),i=Object(n.a)(a,2),r=i[0],c=i[1];Object(p.useEffect)((function(){c(1)}),[t]);var o=function(e){var t=M(e),s=Object(k.a)(t,S),a=s.data,n=s.error;return{photos:a,isLoading:!n&&!a,isError:n}}(t),l=o.photos;if(o.isLoading)return Object(f.jsx)("div",{className:"Photos__loading",children:"Loading..."});var d=l.photos;console.log({items:d,page:r});var j=Math.floor(d.length/6);return Object(f.jsxs)("div",{className:"Photos",children:[d.length&&Object(f.jsxs)("div",{className:"Photos__carousel",children:[Object(f.jsx)(D.a,{color:"primary",onClick:function(){return c(r-6)},children:"Prev"}),Object(f.jsx)("div",{className:"Photos__items",children:d.slice(r,r+6).map((function(e){return Object(f.jsx)(F,{photo:e,onClickPhoto:s},e.id)}))}),Object(f.jsx)(D.a,{color:"primary",onClick:function(){return c(r+6)},children:"Next"})]}),Object(f.jsxs)("div",{className:"text-center",hidden:!0,children:["Page: ",Math.floor(r/6)+1," / ",j]})]})})),V=s(162),I=s(71),B=new o,J=new l,T=Object(I.a)({palette:{type:"dark",primary:{main:"rgb(153, 45, 50)"}}}),X=function(){var e=function(e){J.setRover(e.rover.name.toLowerCase()),Object(R.navigate)("/photos")};return Object(f.jsx)("div",{className:"SelectRover",children:[{rover:{name:"Perseverance",missionDates:"2021"},img_src:"https://mars.nasa.gov/mars2020-raw-images/pub/ods/surface/sol/00044/ids/edr/browse/ncam/NLF_0044_0670852418_793ECM_N0031416NCAM02044_01_295J01_1200.jpg"},{rover:{name:"Curiosity",missionDates:"2012 - 2021"},img_src:"https://mars.nasa.gov/msl-raw-images/msss/01100/mcam/1100ML0048780060500632E01_DXXX.jpg"},{rover:{name:"Opportunity",missionDates:"2004 - 2018"},img_src:"https://mars.nasa.gov/mer/gallery/all/1/p/1901/1P296952193EFFA200P2359L1M1-BR.JPG"},{rover:{name:"Spirit",missionDates:"2004 - 2010"},img_src:"https://mars.nasa.gov/mer/gallery/all/2/n/2017/2N305424848EFFB1E5P1938R0M1-BR.JPG"}].map((function(t){return Object(f.jsx)(F,{photo:t,onClickPhoto:e},t.img_src)}))})},Y=function(e){var t,s=e.tab,i=Object(p.useState)(void 0),r=Object(n.a)(i,2),c=r[0],o=r[1],l=function(e){if(o(e),void 0!==e){var t=v.a.get("favourites ")||[];v.a.set("favourites",[].concat(Object(a.a)(t),[e]))}};return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:j()({View:!0,View__active:"home"===s}),children:Object(f.jsx)("div",{className:"container",children:Object(f.jsx)(X,{})})}),Object(f.jsx)("div",{className:j()({View:!0,View__active:"manifest"===s}),children:Object(f.jsx)("div",{className:"container",children:Object(f.jsx)(E,{manifest:B,filters:J})})}),Object(f.jsx)("div",{className:j()({View:!0,View__active:"photos"===s}),children:Object(f.jsx)("div",{className:"container",children:Object(f.jsx)(A,{filters:J,onClickPhoto:l})})}),c?Object(f.jsx)("div",{className:"SelectedPhoto",onClick:function(){return l(void 0)},children:Object(f.jsxs)("div",{children:[Object(f.jsx)("img",{src:c.img_src,alt:"Mars Rover Photo "+c.id}),Object(f.jsxs)("div",{className:"Photo__details",children:[Object(f.jsxs)("div",{children:[" ",c.rover.name," "]}),Object(f.jsxs)("div",{children:[" ",c.rover.missionDates||""," "]}),Object(f.jsxs)("div",{children:[" ",null===(t=c.camera)||void 0===t?void 0:t.name," "]}),Object(f.jsxs)("div",{children:[" ",c.earth_date," "]})]})]})}):""]})},G=function(){return Object(f.jsx)("div",{className:"NavView",children:Object(f.jsxs)("div",{className:"container NavView__inner",children:[Object(f.jsx)(R.A,{className:"NavItem",href:"/",children:"Home"}),Object(f.jsx)(R.A,{className:"NavItem",href:"/manifest",children:"Manifest"}),Object(f.jsx)(R.A,{className:"NavItem",href:"/photos",children:"Photos"})]})})},q={"/":function(){return Object(f.jsx)(Y,{tab:"home"})},"/manifest":function(){return Object(f.jsx)(Y,{tab:"manifest"})},"/photos":function(){return Object(f.jsx)(Y,{tab:"photos"})}},H=function(){var e=Object(R.useRoutes)(q);return Object(f.jsx)(V.a,{theme:T,children:Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)("div",{className:"App__header",children:Object(f.jsx)("div",{className:"container",children:Object(f.jsxs)("div",{className:"App__header__inner",children:[Object(f.jsx)("div",{className:"App__title",children:"Mars Rover Photos"}),Object(f.jsx)(G,{})]})})}),Object(f.jsxs)("div",{className:"App__main",children:[e,Object(f.jsx)("div",{className:"container",children:Object(f.jsx)("a",{href:"https://github.com/simon-lang/mars-rover-photos",className:"credit-link",children:"simon-lang/mars-rover-photos"})})]})]})})},U=s(9),$=s.n(U),z=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,165)).then((function(t){var s=t.getCLS,a=t.getFID,n=t.getFCP,i=t.getLCP,r=t.getTTFB;s(e),a(e),n(e),i(e),r(e)}))};s(130),$.a.render(Object(f.jsx)(H,{}),document.getElementById("root")),z(console.log)},79:function(e,t,s){},90:function(e,t,s){}},[[131,1,2]]]);
//# sourceMappingURL=main.2fc18012.chunk.js.map