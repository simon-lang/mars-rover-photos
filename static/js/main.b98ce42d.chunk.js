(this["webpackJsonpmars-rover-photos"]=this["webpackJsonpmars-rover-photos"]||[]).push([[0],{111:function(e,t,a){},112:function(e,t,a){"use strict";a.r(t);var n=a(72),s=a(34),o=(a(80),a(23)),r=a(24),i=a(6),c=function(){function e(){Object(o.a)(this,e),this.data={},Object(i.l)(this)}return Object(r.a)(e,[{key:"set",value:function(e){this.data=e}}]),e}(),l=function(){function e(){Object(o.a)(this,e),this.items=[],this.page=0,Object(i.l)(this)}return Object(r.a)(e,[{key:"set",value:function(e){this.items=e}},{key:"add",value:function(e){this.items.push(e)}},{key:"reset",value:function(){this.items=[]}},{key:"setPage",value:function(e){e<0&&(e=0),e>=this.items.length&&(e=this.items.length-1),this.page=e}}]),e}(),u=a(0),h=a.n(u),d=function(){function e(){Object(o.a)(this,e),this.rover="perseverance",this.camera="",this.sol=1,Object(i.l)(this)}return Object(r.a)(e,[{key:"setRover",value:function(e){this.rover=e,this.sol=1,console.log("setRover",e)}},{key:"setCamera",value:function(e){this.camera=e,console.log("setCamera",e)}},{key:"setSol",value:function(e){this.sol=e,console.log("setSol",e)}}]),e}(),j=a(63),v=a.n(j),m=a(149),f=a(152),b=a(150),p=a(147),O=a(148),g=a(71),x=a(48),_=a.n(x),y=a(64),k=a(49),P=a.n(k),w=a(65),N=a.n(w),S="https://api.nasa.gov/mars-photos/api/v1/",C="wwYXJBLASfX4wNrbLfEetDdx6U3EbRSm1Lx93DGa",E=function(){var e=Object(y.a)(_.a.mark((function e(t){var a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=S+"rovers/"+t.rover.toLowerCase()+"/photos?",t.camera&&(a+="camera="+t.camera),null!=t.sol?a+="&sol="+t.sol:a+="&earth_date="+N()(t.earth_date).format("YYYY-M-D"),a+="&api_key=".concat(C),e.abrupt("return",P()({method:"GET",url:a}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=a(33),M=a(5),R=function(e){return Object(M.jsx)("div",{children:Object(M.jsx)("pre",{children:JSON.stringify(e,null,2)})})},F=Object(L.a)((function(e){var t=e.manifest,a=e.filters;Object(u.useEffect)((function(){var e;(e=a.rover,P()({method:"GET",url:S+"manifests/"+e.toLowerCase()+"?api_key="+C}).then((function(e){return e.data.photo_manifest}))).then((function(e){t.set(e)}))}),[a.rover,t]);var n=t.data,s=n.name,o=n.landing_date,r=n.launch_date,i=n.status,c=n.max_sol,l=n.max_date,h=n.total_photos,d=n.photos,j={name:s,landing_date:o,launch_date:r,status:i,max_sol:c,max_date:l,total_photos:h},v=Object(u.useRef)(null);if(v.current&&d){var m={$schema:"https://vega.github.io/schema/vega-lite/v4.json",data:{values:d.map((function(e){return{sol:e.sol,date:e.earth_date,value:e.total_photos}}))},config:{background:null},vconcat:[{width:800,height:400,transform:[{filter:{param:"brush"}}],mark:{type:"bar",color:"rgb(153, 45, 50)"},encoding:{x:{field:"sol",type:"nominal",axis:!1},y:{field:"value",type:"quantitative",axis:{title:"Photos"}},tooltip:[{field:"sol",title:"Martian Sol"},{field:"value",title:"Photos"},{field:"date",title:"Earth Date"}]}},{width:800,height:100,mark:{type:"bar",color:"rgb(153, 45, 50)"},params:[{name:"brush",select:{type:"interval",encodings:["x"]}}],encoding:{x:{field:"sol",type:"nominal",axis:!1},y:{field:"value",type:"quantitative",axis:{title:"Photos"}}}}]};console.log(m),window.vegaEmbed(v.current,m,{actions:!1,theme:"dark"}).then((function(e){var t=e.view;e.spec;t.addEventListener("click",(function(e,t){if(t&&t.datum){var n=t.datum.sol;n&&a.setSol(n)}}))}))}return Object(M.jsxs)("div",{className:"Manifest",children:[Object(M.jsx)("div",{ref:v}),j.name?Object(M.jsx)(R,{data:j}):"Loading..."]})})),D=new l,Y=new c,I=new d,J=Object(L.a)((function(e){var t=e.filters,a=e.photos,o=Object(u.useState)([]),r=Object(s.a)(o,2),i=(r[0],r[1]);return Object(u.useEffect)((function(){var e=v.a.uniq(a.items.map((function(e){return e.camera.name})));i([""].concat(Object(n.a)(e)))}),[a.items]),Object(M.jsxs)("div",{className:"Filters",children:[Object(M.jsx)("div",{className:"Filters__item",children:Object(M.jsxs)(m.a,{label:"Rover",value:t.rover,onChange:function(e){return t.setRover(e.target.value)},children:[Object(M.jsx)(f.a,{value:"perseverance",children:"Perseverance"}),Object(M.jsx)(f.a,{value:"curiosity",children:"Curiosity"}),Object(M.jsx)(f.a,{value:"opportunity",children:"Opportunity"}),Object(M.jsx)(f.a,{value:"spirit",children:"Spirit"})]})}),!1,Object(M.jsx)("div",{className:"Filters__item",children:Object(M.jsx)(b.a,{label:"Sol",value:t.sol,onChange:function(e){return t.setSol(e.target.value)},type:"number"})})]})})),T=function(e){var t=e.photo,a=e.onClickPhoto,n=Object(u.useState)("black"),o=Object(s.a)(n,2),r=o[0],i=o[1],c=Object(u.useState)(!1),l=Object(s.a)(c,2),h=l[0],d=l[1],j=t.img_src,v=new window.Image;return v.onload=function(){i("url(".concat(j,")")),d(!0)},v.src=j,Object(M.jsx)("div",{className:"Photo ".concat(h?"Photo--reveal":""),style:{backgroundImage:r},onClick:function(e){return a(t)},children:Object(M.jsxs)("div",{className:"Photo__details",children:[Object(M.jsxs)("div",{hidden:!0,children:[" ",t.rover.name," "]}),Object(M.jsxs)("div",{children:[" ",t.camera.name," "]}),Object(M.jsxs)("div",{children:[" ",t.earth_date," "]})]})})},q=Object(L.a)((function(e){var t=e.photos,a=e.filters,n=Object(u.useState)(void 0),o=Object(s.a)(n,2),r=o[0],i=o[1];Object(u.useEffect)((function(){t.set([]);var e={rover:a.rover,sol:a.sol};a.camera&&(e.camera=a.camera),E(e).then((function(e){console.log(e.data.photos),t.set(e.data.photos),t.setPage(0)}))}),[a.rover,a.camera,a.sol,t]);var c=function(e){i(e)},l=t.items,h=t.page,d=Math.floor(l.length/6);return Object(M.jsxs)("div",{className:"Photos",children:[l.length&&Object(M.jsxs)("div",{className:"Photos__carousel",children:[Object(M.jsx)(p.a,{color:"primary",onClick:function(){return t.setPage(h-6)},children:"Prev"}),Object(M.jsx)("div",{className:"Photos__items",children:l.slice(h,h+6).map((function(e){return Object(M.jsx)(T,{photo:e,onClickPhoto:c},e.id)}))}),Object(M.jsx)(p.a,{color:"primary",onClick:function(){return t.setPage(h+6)},children:"Next"})]}),Object(M.jsxs)("div",{children:["Page: ",Math.floor(h/6)+1," / ",d]}),r?Object(M.jsx)("div",{className:"SelectedPhoto",onClick:function(){return c(void 0)},children:Object(M.jsx)("img",{src:r.img_src,alt:"Mars Rover Photo "+r.id})}):""]})})),A=Object(g.a)({palette:{type:"dark"}}),B=function(){return Object(M.jsx)(O.a,{theme:A,children:Object(M.jsxs)("div",{className:"App",children:[Object(M.jsx)("header",{className:"App__header",children:Object(M.jsx)("div",{className:"container",children:"Mars Rover Photos"})}),Object(M.jsxs)("div",{className:"container",children:[Object(M.jsx)(J,{photos:D,filters:I}),Object(M.jsx)(q,{photos:D,filters:I}),Object(M.jsx)(F,{manifest:Y,filters:I}),Object(M.jsx)("a",{href:"https://github.com/simon-lang/mars-rover-photos",className:"credit-link",children:"simon-lang/mars-rover-photos"})]})]})})},G=a(9),X=a.n(G),U=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,153)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,o=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),o(e),r(e)}))};a(111),X.a.render(Object(M.jsx)(h.a.StrictMode,{children:Object(M.jsx)(B,{})}),document.getElementById("root")),U(console.log)},80:function(e,t,a){}},[[112,1,2]]]);
//# sourceMappingURL=main.b98ce42d.chunk.js.map