(this["webpackJsonpmars-rover-photos"]=this["webpackJsonpmars-rover-photos"]||[]).push([[0],{103:function(e,t,a){},104:function(e,t,a){"use strict";a.r(t);var s=a(18),n=(a(71),a(20)),i=a(21),c=a(5),o=function(){function e(){Object(n.a)(this,e),this.data={},Object(c.l)(this)}return Object(i.a)(e,[{key:"set",value:function(e){this.data=e}}]),e}(),r=function(){function e(){Object(n.a)(this,e),this.items=[],this.page=0,Object(c.l)(this)}return Object(i.a)(e,[{key:"set",value:function(e){this.items=e}},{key:"add",value:function(e){this.items.push(e)}},{key:"reset",value:function(){this.items=[]}},{key:"setPage",value:function(e){e<0&&(e=0),e>=this.items.length&&(e=this.items.length-1),this.page=e}}]),e}(),l=function(){function e(){Object(n.a)(this,e),this.rover="perseverance",this.camera="",this.sol=1,Object(c.l)(this)}return Object(i.a)(e,[{key:"setRover",value:function(e){this.rover=e,this.sol=1,console.log("setRover",e)}},{key:"setCamera",value:function(e){this.camera=e,console.log("setCamera",e)}},{key:"setSol",value:function(e){this.sol=e,console.log("setSol",e)}}]),e}(),h=a(134),d=a(66),u=a(0),j=a.n(u),v=a(57),m=a.n(v),b=a(136),f=a(137),p=a(22),O=a(3),x=Object(p.a)((function(e){var t=e.filters,a=e.photos,n=Object(u.useState)([]),i=Object(s.a)(n,2),c=(i[0],i[1]);return Object(u.useEffect)((function(){var e=m.a.uniq(a.items.map((function(e){return e.camera.name})));c([""].concat(Object(d.a)(e)))}),[a.items]),Object(O.jsxs)("div",{className:"Filters",children:[Object(O.jsx)("div",{className:"Filters__item",children:Object(O.jsxs)(b.a,{label:"Rover",value:t.rover,onChange:function(e){return t.setRover(e.target.value)},children:[Object(O.jsx)(f.a,{value:"perseverance",children:"Perseverance"}),Object(O.jsx)(f.a,{value:"curiosity",children:"Curiosity"}),Object(O.jsx)(f.a,{value:"opportunity",children:"Opportunity"}),Object(O.jsx)(f.a,{value:"spirit",children:"Spirit"})]})}),!1,!1]})})),g=(a(83),a(42)),_=a.n(g),y=a(63),k=a(43),w=a.n(k),N=a(64),P=a.n(N),S="https://api.nasa.gov/mars-photos/api/v1/",C="wwYXJBLASfX4wNrbLfEetDdx6U3EbRSm1Lx93DGa",L=function(){var e=Object(y.a)(_.a.mark((function e(t){var a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=S+"rovers/"+t.rover.toLowerCase()+"/photos?",t.camera&&(a+="camera="+t.camera),null!=t.sol?a+="&sol="+t.sol:a+="&earth_date="+P()(t.earth_date).format("YYYY-M-D"),a+="&api_key=".concat(C),e.abrupt("return",w()({method:"GET",url:a}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(e){return Object(O.jsx)("div",{children:Object(O.jsx)("pre",{children:JSON.stringify(e.data,null,2)})})},E=Object(p.a)((function(e){var t=e.manifest,a=e.filters;Object(u.useEffect)((function(){var e;(e=a.rover,w()({method:"GET",url:S+"manifests/"+e.toLowerCase()+"?api_key="+C}).then((function(e){return e.data.photo_manifest}))).then((function(e){t.set(e)}))}),[a.rover,t]);var s=t.data,n=s.name,i=s.landing_date,c=s.launch_date,o=s.status,r=s.max_sol,l=s.max_date,h=s.total_photos,d=s.photos,j={name:n,landing_date:i,launch_date:c,status:o,max_sol:r,max_date:l,total_photos:h},v=Object(u.useRef)(null);if(v.current&&d){var m={$schema:"https://vega.github.io/schema/vega-lite/v4.json",data:{values:d.map((function(e){return{sol:e.sol,date:e.earth_date,value:e.total_photos}}))},config:{background:null},vconcat:[{width:800,height:400,transform:[{filter:{param:"brush"}}],mark:{type:"bar",color:"rgb(153, 45, 50)"},encoding:{x:{field:"sol",type:"nominal",axis:!1},y:{field:"value",type:"quantitative",axis:{title:"Photos"}},tooltip:[{field:"sol",title:"Martian Sol"},{field:"value",title:"Photos"},{field:"date",title:"Earth Date"}]}},{width:800,height:100,mark:{type:"bar",color:"rgb(153, 45, 50)"},params:[{name:"brush",select:{type:"interval",encodings:["x"]}}],encoding:{x:{field:"sol",type:"nominal",axis:!1},y:{field:"value",type:"quantitative",axis:{title:"Photos"}}}}]};console.log(m),window.vegaEmbed(v.current,m,{actions:!1,theme:"dark"}).then((function(e){var t=e.view;e.spec;t.addEventListener("click",(function(e,t){if(t&&t.datum){var s=t.datum.sol;s&&a.setSol(s)}}))}))}return Object(O.jsxs)("div",{className:"Manifest",children:[Object(O.jsx)("div",{ref:v}),Object(O.jsxs)("div",{style:{paddingLeft:"1em"},children:[Object(O.jsx)("pre",{children:"Rover Selected: Curiosity"}),Object(O.jsx)("pre",{children:"Manifest... Loading"}),Object(O.jsx)("pre",{children:"Mission Status... Active"}),Object(O.jsx)("pre",{children:"Most Recent Photo... 2021-03-29"}),j.name?Object(O.jsx)(M,{data:j}):"Loading...",Object(O.jsx)("pre",{children:"> Select date to view photos"})]})]})})),R=function(e){var t=e.photo,a=e.onClickPhoto,n=Object(u.useState)("black"),i=Object(s.a)(n,2),c=i[0],o=i[1],r=Object(u.useState)(!1),l=Object(s.a)(r,2),h=l[0],d=l[1],j=t.img_src,v=new window.Image;return v.onload=function(){o("url(".concat(j,")")),d(!0)},v.src=j,Object(O.jsx)("div",{className:"Photo ".concat(h?"Photo--reveal":""),style:{backgroundImage:c},onClick:function(){return a(t)},children:Object(O.jsxs)("div",{className:"Photo__details",children:[Object(O.jsxs)("div",{hidden:!0,children:[" ",t.rover.name," "]}),Object(O.jsxs)("div",{children:[" ",t.camera.name," "]}),Object(O.jsxs)("div",{children:[" ",t.earth_date," "]})]})})},F=Object(p.a)((function(e){var t=e.photos,a=e.filters,n=Object(u.useState)(void 0),i=Object(s.a)(n,2),c=i[0],o=i[1];Object(u.useEffect)((function(){t.set([]);var e={rover:a.rover,sol:a.sol};a.camera&&(e.camera=a.camera),L(e).then((function(e){console.log(e.data.photos),t.set(e.data.photos),t.setPage(0)}))}),[a.rover,a.camera,a.sol,t]);var r=function(e){o(e)},l=t.items,d=t.page;if(!l)return Object(O.jsx)("div",{children:"Loading..."});var j=Math.floor(l.length/6);return Object(O.jsxs)("div",{className:"Photos",children:[l.length&&Object(O.jsxs)("div",{className:"Photos__carousel",children:[Object(O.jsx)(h.a,{color:"primary",onClick:function(){return t.setPage(d-6)},children:"Prev"}),Object(O.jsx)("div",{className:"Photos__items",children:l.slice(d,d+6).map((function(e){return Object(O.jsx)(R,{photo:e,onClickPhoto:r},e.id)}))}),Object(O.jsx)(h.a,{color:"primary",onClick:function(){return t.setPage(d+6)},children:"Next"})]}),Object(O.jsxs)("div",{className:"text-center",hidden:!0,children:["Page: ",Math.floor(d/6)+1," / ",j]}),c?Object(O.jsx)("div",{className:"SelectedPhoto",onClick:function(){return r(void 0)},children:Object(O.jsx)("img",{src:c.img_src,alt:"Mars Rover Photo "+c.id})}):""]})})),A=a(135),D=a(65),Y=a(44),B=a.n(Y),I=new r,J=new o,T=new l,V=Object(D.a)({palette:{type:"dark",primary:{main:"rgb(153, 45, 50)"}}}),q=function(){var e=Object(u.useState)("manifest"),t=Object(s.a)(e,2),a=t[0],n=t[1];return Object(O.jsx)(A.a,{theme:V,children:Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)("header",{className:"App__header",children:Object(O.jsx)("div",{className:"container",children:"Mars Rover Photos"})}),Object(O.jsxs)("div",{className:"App__main",children:[Object(O.jsx)("div",{className:"NavButton",children:Object(O.jsx)(h.a,{onClick:function(){n("photos"===a?"manifest":"photos")},children:"photos"===a?"Manifest":"Photos"})}),Object(O.jsx)("div",{className:B()({View:!0,View__active:"photos"===a}),children:Object(O.jsx)("div",{className:"container",children:Object(O.jsx)(F,{photos:I,filters:T})})}),Object(O.jsx)("div",{className:B()({View:!0,View__active:"manifest"===a}),children:Object(O.jsxs)("div",{className:"container",children:[Object(O.jsx)(x,{photos:I,filters:T}),Object(O.jsx)(E,{manifest:J,filters:T})]})}),Object(O.jsx)("div",{className:"container",children:Object(O.jsx)("a",{href:"https://github.com/simon-lang/mars-rover-photos",className:"credit-link",children:"simon-lang/mars-rover-photos"})})]})]})})},G=a(9),X=a.n(G),U=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,138)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,i=t.getLCP,c=t.getTTFB;a(e),s(e),n(e),i(e),c(e)}))};a(103),X.a.render(Object(O.jsx)(j.a.StrictMode,{children:Object(O.jsx)(q,{})}),document.getElementById("root")),U(console.log)},71:function(e,t,a){},83:function(e,t,a){}},[[104,1,2]]]);
//# sourceMappingURL=main.82864576.chunk.js.map