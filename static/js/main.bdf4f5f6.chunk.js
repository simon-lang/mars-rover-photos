(this["webpackJsonpmars-rover-photos"]=this["webpackJsonpmars-rover-photos"]||[]).push([[0],{130:function(e,t,s){},131:function(e,t,s){"use strict";s.r(t);s(79);var a=s(32),n=s(33),r=s(5),i=function(){function e(){Object(a.a)(this,e),this.data={},Object(r.l)(this)}return Object(n.a)(e,[{key:"set",value:function(e){this.data=e}}]),e}(),c=function(){function e(){Object(a.a)(this,e),this.rover="perseverance",this.camera="",this.sol=1,Object(r.l)(this)}return Object(n.a)(e,[{key:"setRover",value:function(e){this.rover=e,this.sol=1,console.log("setRover",e)}},{key:"setCamera",value:function(e){this.camera=e,console.log("setCamera",e)}},{key:"setSol",value:function(e){this.sol=e,console.log("setSol",e)}}]),e}(),o=s(43),l=s.n(o),d=s(163),j=s(164),h=s(21),u=s(2),v=Object(h.a)((function(e){var t=e.filters;return Object(u.jsxs)("div",{className:"Filters",children:[Object(u.jsx)("div",{className:"Filters__item",children:Object(u.jsxs)(d.a,{label:"Rover",value:t.rover,onChange:function(e){return t.setRover(e.target.value)},children:[Object(u.jsx)(j.a,{value:"perseverance",children:"Perseverance"}),Object(u.jsx)(j.a,{value:"curiosity",children:"Curiosity"}),Object(u.jsx)(j.a,{value:"opportunity",children:"Opportunity"}),Object(u.jsx)(j.a,{value:"spirit",children:"Spirit"})]})}),!1]})})),m=(s(90),s(0)),b=s(28),f=s.n(b),O=s(50),p=s(51),x=s.n(p),g=s(70),_=s.n(g),N=s(72),y="https://api.nasa.gov/mars-photos/api/v1/",w="wwYXJBLASfX4wNrbLfEetDdx6U3EbRSm1Lx93DGa",P=function(){var e=Object(O.a)(f.a.mark((function e(t,s){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,s);case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}(),k=function(e){var t=e.rover.toLowerCase(),s=y+"rovers/"+t+"/photos?";return e.camera&&(s+="camera="+e.camera),null!=e.sol?s+="&sol="+e.sol:s+="&earth_date="+_()(e.earth_date).format("YYYY-M-D"),s+="&api_key=".concat(w)},C=s(18),S=function(e){return Object(u.jsx)("div",{children:Object(u.jsx)("pre",{children:JSON.stringify(e.data,null,2)})})},L=Object(h.a)((function(e){var t=e.manifest,s=e.filters;Object(m.useEffect)((function(){var e;(e=s.rover,x()({method:"GET",url:y+"manifests/"+e.toLowerCase()+"?api_key="+w}).then((function(e){return e.data.photo_manifest}))).then((function(e){t.set(e)}))}),[s.rover,t]);var a=t.data,n=a.name,r=a.landing_date,i=a.launch_date,c=a.status,o=a.max_sol,l=a.max_date,d=a.total_photos,j=a.photos,h={name:n,landing_date:r,launch_date:i,status:c,max_sol:o,max_date:l,total_photos:d},v=Object(m.useRef)(null);if(v.current&&j){var b={$schema:"https://vega.github.io/schema/vega-lite/v4.json",data:{values:j.map((function(e){return{sol:e.sol,date:e.earth_date,value:e.total_photos}}))},config:{background:null},vconcat:[{width:800,height:400,transform:[{filter:{param:"brush"}}],mark:{type:"bar",color:"rgb(153, 45, 50)"},encoding:{x:{field:"sol",type:"nominal",axis:!1},y:{field:"value",type:"quantitative",axis:{title:"Photos"}},tooltip:[{field:"sol",title:"Martian Sol"},{field:"value",title:"Photos"},{field:"date",title:"Earth Date"}]}},{width:800,height:100,mark:{type:"bar",color:"rgb(153, 45, 50)"},params:[{name:"brush",select:{type:"interval",encodings:["x"]}}],encoding:{x:{field:"sol",type:"nominal",axis:!1},y:{field:"value",type:"quantitative",axis:{title:"Photos"}}}}]};console.log(b),window.vegaEmbed(v.current,b,{actions:!1,theme:"dark"}).then((function(e){var t=e.view;e.spec;t.addEventListener("click",(function(e,t){if(t&&t.datum){var a=t.datum.sol;a&&(s.setSol(a),Object(C.navigate)("/photos"))}}))}))}return Object(u.jsxs)("div",{className:"Manifest",children:[Object(u.jsx)("div",{ref:v}),Object(u.jsxs)("div",{style:{paddingLeft:"1em"},children:[Object(u.jsx)("pre",{children:"Rover Selected: Curiosity"}),Object(u.jsx)("pre",{children:"Manifest... Loading"}),Object(u.jsx)("pre",{children:"Mission Status... Active"}),Object(u.jsx)("pre",{children:"Most Recent Photo... 2021-03-29"}),h.name?Object(u.jsx)(S,{data:h}):"Loading...",Object(u.jsx)("pre",{children:"> Select date to view photos"})]})]})})),M=s(73),R=s(29),E=s(52),D=s.n(E),F=s(161),A=function(e){var t,s=e.photo,a=e.onClickPhoto,n=Object(m.useState)("black"),r=Object(R.a)(n,2),i=r[0],c=r[1],o=Object(m.useState)(!1),l=Object(R.a)(o,2),d=l[0],j=l[1],h=s.img_src,v=new window.Image;return v.onload=function(){c("url(".concat(h,")")),j(!0)},v.src=h,Object(u.jsx)("div",{className:"Photo ".concat(d?"Photo--reveal":""),style:{backgroundImage:i},onClick:function(){return a(s)},children:Object(u.jsxs)("div",{className:"Photo__details",children:[Object(u.jsxs)("div",{children:[" ",s.rover.name," "]}),Object(u.jsxs)("div",{children:[" ",s.rover.missionDates||""," "]}),Object(u.jsxs)("div",{children:[" ",null===(t=s.camera)||void 0===t?void 0:t.name," "]}),Object(u.jsxs)("div",{children:[" ",s.earth_date," "]})]})})},V=Object(h.a)((function(e){var t,s=e.filters,a=Object(m.useState)(1),n=Object(R.a)(a,2),r=n[0],i=n[1],c=Object(m.useState)(void 0),o=Object(R.a)(c,2),l=o[0],d=o[1];Object(m.useEffect)((function(){i(1)}),[s]);var j=function(e){var t=k(e),s=Object(N.a)(t,P),a=s.data,n=s.error;return{photos:a,isLoading:!n&&!a,isError:n}}(s),h=j.photos,v=j.isLoading,b=function(e){if(d(e),void 0!==e){var t=D.a.get("favourites ")||[];D.a.set("favourites",[].concat(Object(M.a)(t),[e]))}};if(v)return Object(u.jsx)("div",{children:"Loading..."});var f=h.photos;console.log({items:f,page:r});var O=Math.floor(f.length/6);return Object(u.jsxs)("div",{className:"Photos",children:[f.length&&Object(u.jsxs)("div",{className:"Photos__carousel",children:[Object(u.jsx)(F.a,{color:"primary",onClick:function(){return i(r-6)},children:"Prev"}),Object(u.jsx)("div",{className:"Photos__items",children:f.slice(r,r+6).map((function(e){return Object(u.jsx)(A,{photo:e,onClickPhoto:b},e.id)}))}),Object(u.jsx)(F.a,{color:"primary",onClick:function(){return i(r+6)},children:"Next"})]}),Object(u.jsxs)("div",{className:"text-center",hidden:!0,children:["Page: ",Math.floor(r/6)+1," / ",O]}),l?Object(u.jsx)("div",{className:"SelectedPhoto",onClick:function(){return b(void 0)},children:Object(u.jsxs)("div",{children:[Object(u.jsx)("img",{src:l.img_src,alt:"Mars Rover Photo "+l.id}),Object(u.jsxs)("div",{className:"Photo__details",children:[Object(u.jsxs)("div",{children:[" ",l.rover.name," "]}),Object(u.jsxs)("div",{children:[" ",l.rover.missionDates||""," "]}),Object(u.jsxs)("div",{children:[" ",null===(t=l.camera)||void 0===t?void 0:t.name," "]}),Object(u.jsxs)("div",{children:[" ",l.earth_date," "]})]})]})}):""]})})),I=s(162),J=s(71),B=new i,X=new c,Y=Object(J.a)({palette:{type:"dark",primary:{main:"rgb(153, 45, 50)"}}}),G=function(){var e=function(e){X.setRover(e.rover.name.toLowerCase()),Object(C.navigate)("/photos")};return Object(u.jsx)("div",{className:"SelectRover",children:[{rover:{name:"Perseverance",missionDates:"2021"},img_src:"https://mars.nasa.gov/mars2020-raw-images/pub/ods/surface/sol/00044/ids/edr/browse/ncam/NLF_0044_0670852418_793ECM_N0031416NCAM02044_01_295J01_1200.jpg"},{rover:{name:"Curiosity",missionDates:"2012 - 2021"},img_src:"https://mars.nasa.gov/msl-raw-images/msss/01100/mcam/1100ML0048780060500632E01_DXXX.jpg"},{rover:{name:"Opportunity",missionDates:"2004 - 2018"},img_src:"https://mars.nasa.gov/mer/gallery/all/1/p/1901/1P296952193EFFA200P2359L1M1-BR.JPG"},{rover:{name:"Spirit",missionDates:"2004 - 2010"},img_src:"https://mars.nasa.gov/mer/gallery/all/2/n/2017/2N305424848EFFB1E5P1938R0M1-BR.JPG"}].map((function(t){return Object(u.jsx)(A,{photo:t,onClickPhoto:e},t.img_src)}))})},T=function(e){var t=e.tab;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:l()({View:!0,View__active:"home"===t}),children:Object(u.jsx)("div",{className:"container",children:Object(u.jsx)(G,{})})}),Object(u.jsx)("div",{className:l()({View:!0,View__active:"manifest"===t}),children:Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)(v,{filters:X}),Object(u.jsx)(L,{manifest:B,filters:X})]})}),Object(u.jsx)("div",{className:l()({View:!0,View__active:"photos"===t}),children:Object(u.jsx)("div",{className:"container",children:Object(u.jsx)(V,{filters:X})})})]})},q=function(){return Object(u.jsx)("div",{className:"NavView",children:Object(u.jsxs)("div",{className:"container NavView__inner",children:[Object(u.jsx)(C.A,{className:"NavItem",href:"/",children:"Home"}),Object(u.jsx)(C.A,{className:"NavItem",href:"/manifest",children:"Manifest"}),Object(u.jsx)(C.A,{className:"NavItem",href:"/photos",children:"Photos"})]})})},H={"/":function(){return Object(u.jsx)(T,{tab:"home"})},"/manifest":function(){return Object(u.jsx)(T,{tab:"manifest"})},"/photos":function(){return Object(u.jsx)(T,{tab:"photos"})}},U=function(){var e=Object(C.useRoutes)(H);return Object(u.jsx)(I.a,{theme:Y,children:Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)("header",{className:"App__header",children:Object(u.jsx)("div",{className:"container",children:"Mars Rover Photos"})}),Object(u.jsxs)("div",{className:"App__main",children:[Object(u.jsx)(q,{}),e,Object(u.jsx)("div",{className:"container",children:Object(u.jsx)("a",{href:"https://github.com/simon-lang/mars-rover-photos",className:"credit-link",children:"simon-lang/mars-rover-photos"})})]})]})})},$=s(9),z=s.n($),K=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,165)).then((function(t){var s=t.getCLS,a=t.getFID,n=t.getFCP,r=t.getLCP,i=t.getTTFB;s(e),a(e),n(e),r(e),i(e)}))};s(130),z.a.render(Object(u.jsx)(U,{}),document.getElementById("root")),K(console.log)},79:function(e,t,s){},90:function(e,t,s){}},[[131,1,2]]]);
//# sourceMappingURL=main.bdf4f5f6.chunk.js.map